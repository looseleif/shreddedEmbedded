#ifndef OLED_H
#define OLED_H

#include <modules.h>
#include <menu.h>

#include <SPI.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1325.h>
#include <stdint.h>
#include <string.h>



#define OLED_CS 4 //PB4
#define OLED_RESET 1 //PB1
#define OLED_DC 0 //PB0

inline Adafruit_SSD1325 screen(OLED_DC, OLED_RESET, OLED_CS);

static const unsigned char PROGMEM hearty100_bmp[] = {  

    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x03,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x06,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x66,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0xf6,0xb0,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0xfc,0x27,0xe1,0xf0,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x02,0xdd,0xaf,0xe1,0x78,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0x6c,0xa7,0xb3,0x58,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0x60,0x27,0xff,0xf0,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0x91,0xa7,0x80,0xf3,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0x90,0x2c,0x00,0x1f,0x80,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0xc8,0x38,0x00,0x3e,0xc0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x40,0x30,0x00,0x1f,0xc0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x61,0x60,0x00,0x07,0x40,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x23,0xc0,0x05,0x03,0xc0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x31,0xc0,0x3e,0x01,0x80,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x31,0x80,0x7f,0xfd,0xff,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x13,0x00,0x60,0x7f,0xf1,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x33,0x00,0x40,0x00,0x0d,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x33,0x80,0x80,0x08,0x6f,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x33,0x03,0xa0,0x02,0xff,0x80,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x23,0x01,0x20,0x00,0xb3,0x80,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x63,0x01,0x50,0x00,0x00,0x80,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x62,0x03,0xa0,0x00,0x03,0x80,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0xc2,0x03,0x40,0x7f,0xff,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0xc2,0x03,0x80,0xfc,0x4e,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0x9a,0x07,0x80,0xec,0x7e,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0xc2,0x06,0x01,0xe0,0x67,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0x03,0x06,0x81,0x60,0x46,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x06,0x06,0x04,0x05,0x40,0x4e,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x06,0x06,0x04,0x07,0x40,0x1e,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x07,0x06,0x03,0x00,0x1f,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x0c,0x07,0xbe,0x03,0x80,0x03,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x08,0x06,0x63,0x82,0xc4,0x07,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x08,0x16,0x18,0xf2,0x7c,0x1e,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x08,0x16,0x02,0x1a,0xfe,0x30,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x18,0x06,0x04,0x0f,0x83,0x20,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x18,0x0c,0x00,0x06,0x71,0xe0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x18,0x3a,0x41,0x86,0x00,0xe0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x1c,0x70,0x00,0x06,0x00,0x60,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x1c,0xc0,0x03,0x0f,0x00,0x20,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x1e,0xc0,0x00,0x0f,0x04,0x20,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x0f,0x80,0x20,0xb6,0x86,0x70,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x0f,0x40,0x00,0xe4,0x80,0xb0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x00,0x01,0x2c,0x40,0x70,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x40,0x00,0x4c,0x60,0x30,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x60,0x03,0x9e,0x50,0x90,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x20,0x06,0x5c,0x10,0x10,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x04,0x10,0x04,0xac,0x01,0x10,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x06,0x00,0x08,0x5c,0x00,0x90,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x06,0x20,0x00,0x9e,0x00,0x30,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x02,0x10,0x01,0x2c,0x01,0xb0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x03,0x00,0x02,0x2a,0x00,0x20,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0x00,0x06,0x2b,0x01,0x20,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x01,0x88,0x04,0x49,0x00,0x60,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x80,0x00,0x49,0x80,0x40,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0xc8,0x00,0x51,0x00,0x40,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x60,0x00,0x58,0x06,0xc0,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x22,0x00,0x58,0x00,0x80,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x30,0x00,0x40,0x08,0x80,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x18,0x00,0x40,0x05,0x80,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x0e,0x00,0x40,0x01,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x03,0x00,0x40,0x1b,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x01,0x80,0x60,0x06,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x24,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x0c,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x48,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x98,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x0c,0x44,0x30,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x06,0x1e,0x20,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x03,0x86,0xe0,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0xe3,0x80,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x7e,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
    ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  
};

class OLED: public _device 
{

    private: 

        menu *_OLED_menu_ptr;

    public:

        Adafruit_SSD1325* _screen;

        OLED(menu *ptr);

        void sendBitmap(const uint8_t *bitmap, uint8_t w, uint8_t h);
        void sendString(String toSend);
        void bootingPrint(void);
        void rebootingPrint(void);
        void pleaseWaitPrint(void);
        void printGrip(void);
        void testdrawcircle(void);
        void testdrawrect(void);
        void testdrawline(void);
        void clearAll(void);

        void printDemoMenu(void);
        void printDeviceMenu(void);


        void printSelector(int prev, int next, bool clear);

};

#endif